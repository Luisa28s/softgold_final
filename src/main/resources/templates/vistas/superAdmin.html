<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head th:replace="~{plantillas/principal :: head}"></head>

  <body>
    <header th:replace="~{plantillas/principal :: header}"></header>

    <main class="container mt-5">
      <div
        th:if="${mensaje}"
        class="alert alert-success"
        th:text="${mensaje}"
      ></div>

      <div class="card shadow rounded p-4 mb-5">
        <h2 class="mb-3">Panel de Super Administrador</h2>

        <p class="mb-1">
          Usuario activo: <strong th:text="${nombreUsuario}">Usuario</strong>
        </p>
        <p class="mb-4">
          Rol asignado: <strong th:text="${rolUsuario}">SUPERADMIN</strong>
        </p>

        <hr />

        <h4 class="mb-3">Acciones disponibles</h4>
        <ul class="list-group mb-4">
          <li
            class="list-group-item d-flex justify-content-between align-items-center"
          >
            Crear nuevos administradores
            <a
              th:href="@{/super-admin/crear-admin}"
              class="btn btn-outline-primary btn-sm"
              >Ir</a
            >
          </li>
          <li
            class="list-group-item d-flex justify-content-between align-items-center"
          >
            Ver estadísticas del sistema
            <span class="badge bg-secondary">Próximamente</span>
          </li>
          <li
            class="list-group-item d-flex justify-content-between align-items-center"
          >
            Gestionar permisos o roles
            <span class="badge bg-secondary">Próximamente</span>
          </li>
        </ul>

        <p class="text-muted small">
          Desde este panel puedes gestionar a los administradores y tener acceso
          a otras configuraciones.
        </p>
      </div>

      <h4 class="mb-3">Administradores registrados</h4>

      <div th:if="${#lists.isEmpty(listaAdmins)}" class="alert alert-info">
        Aún no hay administradores registrados.
      </div>

      <div th:if="${!#lists.isEmpty(listaAdmins)}" class="table-responsive">
        <table class="table table-bordered table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th>Tipo de documento</th>
              <th>Número de identificación</th>
              <th>Nombre completo</th>
              <th>Email</th>
              <th>Rol</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="admin : ${listaAdmins}">
              <td th:text="${admin.tipoDocumento}"></td>
              <td th:text="${admin.id}"></td>
              <td
                th:text="${admin.nombre1 + ' ' + (admin.nombre2 != null ? admin.nombre2 : '') + ' ' + admin.apellido1 + ' ' + (admin.apellido2 != null ? admin.apellido2 : '')}"
              ></td>
              <td th:text="${admin.email}"></td>
              <td>
                <span
                  th:each="rol : ${admin.roles}"
                  th:text="${rol.nombre}"
                  class="badge bg-primary me-1"
                ></span>
              </td>
              <td>
                <a
                  th:href="@{/super-admin/eliminar-admin/{id}(id=${admin.id})}"
                  class="btn btn-sm btn-danger"
                  onclick="return confirm('¿Seguro que deseas eliminar este administrador?');"
                  >Eliminar</a
                >
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>

    <footer th:replace="~{plantillas/principal :: footer}"></footer>
  </body>
</html>
